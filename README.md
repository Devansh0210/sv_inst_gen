# sv_inst_gen
- This script can automatically generate **SystemVerilog/Verilog HDL** `module` instant from the given buffer and copies into the clipboard. This can be handy when there are large number of ports and parameters in the module and it needs to be integrated into toplevel module. See the [Example](#example)
- This plugin is only intended to be used with SystemVerilog/Verilog HDL.
### Setup
1. `nvim-treesitter` needs to installed to query the syntax-tree for SystemVerilog/Verilog modules. See [Installation](https://github.com/nvim-treesitter/nvim-treesitter?tab=readme-ov-file#installation)
2. Add [`systemverilog.lua`](https://github.com/Devansh0210/sv_inst_gen/blob/main/systemverilog.lua) file in the following hierarchy of your nvim-config folder
   ```
   ~/.config/nvim/after/ftplugin/systemverilog.lua
   ```
3. Open any sv(Systemverilog/Verilog) file or you can open [`test/mux2.sv`](https://github.com/Devansh0210/sv_inst_gen/blob/main/test/mux2.sv) in `test/` folder to check the functionality of this script
4. Type `<leader>iv` in `normal` mode and it should show message of instance being copied into clipboard and then you can use `p` command to paste anywhere into your buffer

### Example:
For given systemverilog/verilog module:
```sv
module mux2 #(
    parameter int WIDTH     = 16,
    parameter int OUT_WIDTH = WIDTH
) (
    input  wire [    WIDTH-1:0] i_data_0,
    input  wire [    WIDTH-1:0] i_data_1,
    input  wire                 i_sel,
    output wire [OUT_WIDTH-1:0] o_data
);

    assign o_data = i_sel ? i_data_1 : i_data_0;

endmodule
```

We need to use `mux2` as sub-module in some other file then, we can use this script to generate module instant of `mux2` and paste it in the file. To copy instant to clipboard type `<leader>iv` in `normal` mode in `mux2.sv` file
```sv
module mux2_16(
   input wire [15:0] i_data_0,
   input wire [15:0] i_data_1,
   input wire        i_sel,
   output wire       o_data
);

// -----------------------------
// Generated Module instant
// -----------------------------
mux2 #(
     .WIDTH(16)
) u_mux2 (
    .i_data_0(i_data_0),
    .i_data_1(i_data_1),
    .i_sel   (i_sel),
    .o_data  (o_data)
);
// -----------------------------
endmodule
```
Here, the snippet for `u_mux2` instant can be generated by using this script which internally uses `nvim-treesitter` to query the syntax-tree to determine module name, parameters and ports.
### Contributing:
- Please feel free to open issue/PR for any suggestions or improvements
